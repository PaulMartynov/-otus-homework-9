!function(){"use strict";function e(e){e.setAttribute("class","alive"),e.setAttribute("style","background-color:black; height:15px; width:15px;")}function t(e){e.setAttribute("class","dead"),e.setAttribute("style","background-color:#FFFFFF; height:15px; width:15px;")}function r(r){var n=document.createElement("td");n.setAttribute("class","dead"),n.setAttribute("style","background-color:#FFFFFF; height:15px; width:15px;"),n.addEventListener("click",(function(){!function(r){"dead"===r.getAttribute("class")?e(r):t(r)}(n)})),r.appendChild(n)}function n(e,t){for(var n=document.createElement("tr"),i=0;i<t;i+=1)r(n);e.appendChild(n)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){var n=e[r];if(void 0===n)return 0;var i=n[t];return void 0===i?0:"alive"===i.getAttribute("class")||"doomed"===i.getAttribute("class")?1:0}function u(e,t,r){var n=function(e,t,r){for(var n=0,i=t-1;i<=t+1;i+=1)n+=l(e,i,r-1);for(var u=t-1;u<=t+1;u+=1)n+=l(e,u,r+1);return(n+=l(e,t-1,r))+l(e,t+1,r)}(e,t,r);return 3===n?1:(n>3||n<2)&&"alive"===e[r][t].getAttribute("class")?0:2}var a=function(){function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.gameField=e,this.startBtn=t,this.gameSpeed=3e3-n}var n,l;return n=r,(l=[{key:"setGameSpeed",value:function(e){this.gameSpeed=3e3-e,this.gameIsRunning&&(this.stop(),this.start())}},{key:"stop",value:function(){this.gameIsRunning=!1,this.startBtn.setAttribute("value","Start game"),clearInterval(this.timer)}},{key:"run",value:function(){var r,n=function(e){for(var t=[],r=e.querySelectorAll("tr"),n=0;n<r.length;n+=1)t.push(r[n].querySelectorAll("td"));return t}(this.gameField);this.gameField.querySelectorAll(".doomed").forEach((function(e){t(e)})),function(t){for(var r=[],n=[],i=0;i<t.length;i+=1)for(var l=0;l<t[i].length;l+=1)1===u(t,l,i)?r.push(t[i][l]):0===u(t,l,i)&&n.push(t[i][l]);n.forEach((function(e){var t;(t=e).setAttribute("class","doomed"),t.setAttribute("style","background-color:blue; height:15px; width:15px;")})),r.forEach((function(t){e(t)}))}(n),(r=this.gameField).querySelectorAll(".alive").length>0||r.querySelectorAll(".doomed").length>0||(alert("All cells is dead"),this.stop())}},{key:"start",value:function(){var e=this;this.gameIsRunning=!0,this.startBtn.setAttribute("value","Stop game"),this.timer=setInterval((function(){e.run()}),this.gameSpeed)}}])&&i(n.prototype,l),r}(),o=document.querySelector("#Ox"),c=document.querySelector("#Oy"),s=document.querySelector("#speed"),d=document.querySelector("#start"),f=document.querySelector("#game_field");if(o&&c&&f&&s&&d){!function(e,t,r){for(var i=0;i<r;i+=1)n(e,t);e.setAttribute("border","1")}(f,Number(o.value),Number(c.value));var v=new a(f,d,Number(s.value));o.addEventListener("click",(function(){!function(e,t){var n=e.querySelectorAll("tr");if(0!==n.length)for(var i=0;i<n.length;i+=1){var l=n[i].querySelectorAll("td"),u=t-l.length;if(u>0)for(var a=0;a<u;a+=1)r(n[i]);else if(u<0)for(var o=0;o>u;o-=1)l[l.length-1].remove(),l=n[i].querySelectorAll("td")}}(f,Number(o.value))})),c.addEventListener("click",(function(){!function(e,t){var r=e.querySelectorAll("tr");if(0!==r.length){var i=t-r.length;if(i>0)for(var l=0;l<i;l+=1)n(e,r[0].querySelectorAll("td").length);else if(i<0)for(var u=0;u>i;u-=1)r[r.length-1].remove(),r=e.querySelectorAll("tr")}}(f,Number(c.value))})),s.addEventListener("mouseup",(function(){v.setGameSpeed(Number(s.value))})),d.addEventListener("click",(function(){v.gameIsRunning?v.stop():v.start()}))}}();